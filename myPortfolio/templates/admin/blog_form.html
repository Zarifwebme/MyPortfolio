{% extends 'admin/base.html' %}
{% block content %}
<h1 class="mb-3">{{ 'Edit' if item else 'Create' }} Blog</h1>
<div class="alert alert-info">Tip: Create a category first if needed. Categories can be managed from the Categories page.</div>
<form method="post" enctype="multipart/form-data">
	<div class="mb-3">
		<label class="form-label">Title</label>
		<input class="form-control" name="title" value="{{ item.title if item else '' }}" required />
	</div>
	<div class="mb-3">
		<label class="form-label">Category</label>
		<select class="form-select" name="category_id">
			<option value="">-- None --</option>
			{% for c in categories %}
				<option value="{{ c.id }}" {% if item and item.category_id==c.id %}selected{% endif %}>{{ c.name }}</option>
			{% endfor %}
		</select>
	</div>
	<div class="mb-3">
		<label class="form-label">Content (Markdown supported)</label>
		<textarea class="form-control" rows="12" name="content" placeholder="Use Markdown for formatting" required>{{ item.content if item else '' }}</textarea>
	</div>
	<div class="mb-3">
		<label class="form-label">Images</label>
		<input class="form-control" type="file" name="images" accept="image/*" multiple />
		{% if item and item.images %}
			<div class="row g-3 mt-2">
				{% for img in item.images %}
					<div class="col-md-3 text-center">
						<img src="{{ img.image_url }}" alt="image" class="img-fluid rounded border" />
						<div class="form-check mt-2">
							<input class="form-check-input" type="checkbox" name="remove_image_{{ img.id }}" id="remove_image_{{ img.id }}">
							<label class="form-check-label" for="remove_image_{{ img.id }}">Remove</label>
						</div>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	</div>
	<div class="mt-3">
		<button class="btn btn-primary">Save</button>
		<a class="btn btn-secondary" href="{{ url_for('admin.admin_blogs') }}">Cancel</a>
	</div>
</form>
{% endblock %}
